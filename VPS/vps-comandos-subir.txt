Perfeito. Voc√™ j√° pegou o fluxo de deploy completo.

O mais importante √© a sua observa√ß√£o:

O Java √© compilado localmente (com a configura√ß√£o do OpenALPR que fizemos).

O Next.js precisa ter a pasta antiga deletada no servidor para uma atualiza√ß√£o limpa.

Aqui est√° o checklist exato, na ordem correta, para fazer a atualiza√ß√£o completa.

PARTE 1: ATUALIZAR O BACKEND (JAVA)

1. üíª No seu PC (PowerShell): Compile o JAR com a altera√ß√£o do OpenALPR

Entre na pasta do projeto e rode o build do Gradle.

PowerShell


cd G:\FIAP\FIAP-2025\NEXT-2025\JAVA\mottu-api-restful\mottu-gradle; .\gradlew.bat clean bootJar -x test


2. ‚òÅÔ∏è No seu VPS (Terminal SSH): Pare o servi√ßo Java

Isso libera o arquivo mottu-app.jar para ser substitu√≠do.

Bash


sudo systemctl stop mottu.service


3. üíª No seu PC (PowerShell): Envie o novo JAR

Este comando sobrescreve (apaga o antigo e coloca o novo) o .jar no VPS.

PowerShell


scp "G:\FIAP\FIAP-2025\NEXT-2025\JAVA\mottu-api-restful\mottu-gradle\build\libs\mottu-gradle-0.0.1-SNAPSHOT.jar" root@72.61.219.15:/opt/app/mottu-app.jar


4. ‚òÅÔ∏è No seu VPS (Terminal SSH): Inicie o servi√ßo Java

Ele vai usar o novo .jar e a configura√ß√£o do OpenALPR que j√° est√° no arquivo mottu.service.

Bash


sudo systemctl start mottu.service


-----------------------------------------------------------------------------------------------------------

PARTE 2: ATUALIZAR O FRONTEND (NEXT.JS)

5. üíª No seu PC (Windows Explorer ou PowerShell): Limpe o projeto local

IMPORTANTE: Antes de enviar, v√° at√© a pasta D:\...\mottu-web e APAGUE as pastas node_modules e .next para um upload r√°pido e limpo.

6. ‚òÅÔ∏è No seu VPS (Terminal SSH): Pare o servi√ßo Next e APAGUE a pasta antiga

Este √© o passo de "deletar os arquivos antigos" que voc√™ mencionou.

Bash


sudo systemctl stop mottu-web.service


rm -rf /opt/mottu-web


7. üíª No seu PC (PowerShell): Envie a nova pasta limpa


Envie a pasta mottu-web (j√° sem node_modules e .next) para o VPS.

PowerShell


scp -r "G:\FIAP\FIAP-2025\NEXT-2025\JAVA\mottu-api-restful\mottu-web" root@72.61.219.15:/opt/


8. ‚òÅÔ∏è No seu VPS (Terminal SSH): Instale, Builde e Inicie o servi√ßo Next

Este √© o processo para colocar o Next.js no ar no servidor.

Bash

# 1. Entre na pasta


cd /opt/mottu-web


# 2. Instale as depend√™ncias (recria a 'node_modules')


npm install


# 3. Fa√ßa o build de produ√ß√£o (recria a '.next')


npm run build


# 4. Inicie o servi√ßo (ele usa o arquivo 'mottu-web.service' que j√° existe)


sudo systemctl start mottu-web.service



PARTE 3: VERIFICA√á√ÉO (Opcional, mas recomendado)
9. ‚òÅÔ∏è No seu VPS (Terminal SSH): Verifique os logs

Se algo der errado, os logs dir√£o o porqu√™.

Bash

# Verifique o log do Java (se falhar)
sudo journalctl -u mottu.service -n 50 --no-pager

# Verifique o log do Next.js (se falhar)
sudo journalctl -u mottu-web.service -n 50 --no-pager