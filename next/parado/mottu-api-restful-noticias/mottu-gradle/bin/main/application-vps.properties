# ==================================================
# CONFIGURAÇÃO OTIMIZADA PARA VPS (72.61.219.15)
# ==================================================

# --- Application Configuration ---
spring.application.name=mottu-gradle
spring.profiles.active=prod

# --- Server Configuration ---
server.port=8080
server.servlet.context-path=/
server.tomcat.connection-timeout=120000
server.tomcat.max-connections=8192
server.tomcat.accept-count=100
server.tomcat.max-threads=200
server.tomcat.min-spare-threads=10

# --- Character Encoding ---
server.servlet.encoding.charset=UTF-8
server.servlet.encoding.enabled=true
server.servlet.encoding.force=true
spring.http.encoding.charset=UTF-8
spring.http.encoding.enabled=true
spring.http.encoding.force=true

# --- Database Configuration (VPS) ---
spring.datasource.url=jdbc:oracle:thin:@//72.61.219.15:1521/XEPDB1
spring.datasource.username=relacaoDireta
spring.datasource.password=paulo1
spring.datasource.driver-class-name=oracle.jdbc.OracleDriver

# --- HikariCP Connection Pool (VPS Optimized) ---
spring.datasource.hikari.maximum-pool-size=15
spring.datasource.hikari.minimum-idle=3
spring.datasource.hikari.idle-timeout=300000
spring.datasource.hikari.connection-timeout=60000
spring.datasource.hikari.max-lifetime=1800000
spring.datasource.hikari.leak-detection-threshold=60000
spring.datasource.hikari.validation-timeout=10000
spring.datasource.hikari.connection-test-query=SELECT 1 FROM DUAL
spring.datasource.hikari.auto-commit=false
spring.datasource.hikari.pool-name=MottuVPSPool
spring.datasource.hikari.register-mbeans=true

# --- JPA Configuration ---
spring.jpa.hibernate.ddl-auto=validate
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.OracleDialect
spring.jpa.properties.hibernate.jdbc.batch_size=25
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true
spring.jpa.properties.hibernate.jdbc.batch_versioned_data=true
spring.jpa.properties.hibernate.default_batch_fetch_size=16
spring.jpa.properties.hibernate.max_fetch_depth=3
spring.jpa.properties.hibernate.connection.provider_disables_autocommit=true
spring.jpa.properties.hibernate.schema=RELACAODIRETA
spring.jpa.properties.hibernate.default_schema=RELACAODIRETA
spring.jpa.properties.hibernate.connection.username=relacaoDireta
spring.jpa.properties.hibernate.connection.password=paulo1
spring.jpa.properties.hibernate.connection.url=jdbc:oracle:thin:@//72.61.219.15:1521/XEPDB1

# --- CORS Configuration (VPS IP) ---
cors.allowed-origins=http://72.61.219.15:3000,http://localhost:3000,http://72.61.219.15:3002,http://72.61.219.15:8080
cors.allowed-methods=GET,POST,PUT,PATCH,DELETE,OPTIONS,HEAD
cors.allowed-headers=*
cors.allow-credentials=true
cors.max-age=7200

# --- File Upload Configuration ---
spring.servlet.multipart.max-file-size=50MB
spring.servlet.multipart.max-request-size=50MB
spring.servlet.multipart.file-size-threshold=2KB
spring.servlet.multipart.location=/tmp

# --- Session Configuration ---
server.servlet.session.timeout=30m
server.servlet.session.cookie.max-age=1800
server.servlet.session.cookie.http-only=true
server.servlet.session.cookie.secure=false
server.servlet.session.cookie.same-site=lax

# --- Cache Configuration ---
spring.cache.type=caffeine
spring.cache.caffeine.spec=maximumSize=1000,expireAfterWrite=30m,recordStats
spring.cache.cache-names=clientesList,patiosList,boxesList,veiculosList,enderecosList,contatosList,rastreamentosList,cnhsList

# --- OpenALPR Configuration (Linux VPS) ---
mottu.ocr.alpr.command=/usr/local/bin/alpr
mottu.ocr.alpr.region=eu
mottu.ocr.alpr.topn=10
mottu.ocr.alpr.minConfidence=70
mottu.ocr.alpr.timeoutMs=30000
mottu.ocr.alpr.debugOutputDir=logs

# --- OCR Configuration ---
mottu.ocr.tessdata-path=
mottu.ocr.lang=por+eng

# --- Logging Configuration (VPS Optimized) ---
logging.level.root=WARN
logging.level.org.springframework.web=INFO
logging.level.org.springframework.data.jpa=WARN
logging.level.org.hibernate.type.descriptor.sql=WARN
logging.level.org.apache.coyote.http11=WARN
logging.level.org.apache.tomcat.util.net=WARN
logging.level.br.com.fiap.mottu=INFO
logging.level.org.springframework.web.cors=INFO
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} - %msg%n
logging.file.name=logs/mottu.log
logging.file.max-size=10MB
logging.file.max-history=7

# --- Monitoring Configuration ---
management.endpoints.web.exposure.include=health,info,metrics,hikaricp
management.endpoint.health.show-details=when-authorized
management.metrics.export.simple.enabled=true
management.health.db.enabled=true
management.health.diskspace.enabled=true
management.health.diskspace.threshold=100MB

# --- Security Configuration ---
server.error.include-stacktrace=never
server.error.include-message=never
server.error.include-exception=false
server.error.include-binding-errors=never

# --- Application Info ---
info.app.name=MOTTU API VPS
info.app.description=Sistema de Gestão de Pátios - VPS
info.app.version=0.0.1-SNAPSHOT
info.app.java.version=${java.version}
info.app.spring.version=${spring.version}
