# ==================================================
# CONFIGURAÇÃO DE PERFORMANCE OTIMIZADA
# ==================================================

# --- Cache com Caffeine ---
spring.cache.type=caffeine
spring.cache.caffeine.spec=maximumSize=1000,expireAfterWrite=30m,recordStats
spring.cache.cache-names=clientesList,patiosList,boxesList,veiculosList,enderecosList,contatosList,rastreamentosList,cnhsList

# --- JPA Otimizado para evitar N+1 ---
spring.jpa.properties.hibernate.jdbc.batch_size=25
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true
spring.jpa.properties.hibernate.jdbc.batch_versioned_data=true
spring.jpa.properties.hibernate.default_batch_fetch_size=16
spring.jpa.properties.hibernate.max_fetch_depth=3

# --- Pool de Conexões Otimizado ---
spring.datasource.hikari.maximum-pool-size=20
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.connection-timeout=60000
spring.datasource.hikari.idle-timeout=300000
spring.datasource.hikari.max-lifetime=1800000
spring.datasource.hikari.leak-detection-threshold=60000

# --- Configurações de Threading ---
server.tomcat.max-threads=200
server.tomcat.min-spare-threads=10
server.tomcat.accept-count=100
server.tomcat.connection-timeout=120000

# --- Configurações de Upload ---
spring.servlet.multipart.max-file-size=50MB
spring.servlet.multipart.max-request-size=50MB
spring.servlet.multipart.file-size-threshold=2KB

